/*
 * The BillingSystem case study, specified for educational and demo purposes
 * Specification in RSLingo RSL v.5
 * 
 * Author: Alberto Rodrigues da Silva
 * 
 * Created Date: 2016/August
 * Last Update:  2018/July
 * 
 */ 
   
 
/*******************************************************************************************/ 
Package billingsystem.userstories  
   
Import p_Billing_v3.* 

System   S_billingsystem_UserStories "BillingSystemUS" : Application

/********************************************************
actor "Operator_Customers" (a_Operator_Customers) : User [description "Manage Customers"]
actor a_Operator_Products : User [name "Operator_Products"  description "Manage Products"]
actor a_Operator : User [name "Operator"  isA a_Operator_Customers description "Manage Invoices and Customers"]
actor a_Manager : User [name "Manager" description "Approve Invoices"]
actor a_TechnicalAdmin : User [name "TechnicalAdmin"  description "Manage Users, VAT, ... Configure System"]
actor a_ERP_Accounting : ExternalSystem [name "ERP-Accounting"  description "Receive info with approval invoices"]
* *********************************************************/


UserStory us_1 "Manage Users" : Epic [
	isNegative 
	asA "TechnicalAdmin"
	iWant "to manage users"
	soThat "other individuals can use the system, with different roles"]


UserStory us_1_1 : UserStory [ 
	partOf us_1
	asA "TechnicalAdmin" 
	iWant "to register an user"

	acceptanceCriteria ac1 "a" : Valid [  
	 scenario "Scenario 1" 
		given "I am a TechnicalAdmin"
		  and "I want to register an User"
		  and "AND-1"
		 when 	"I open the 'Manage Users' page"
		  and "AND-2"
		 then 	"the system shows me the 'Create New User' form containing 'Email','Name' and 'Password' fields which are required" 
		  and "???"
		  and "XXXX"
	]
	
	acceptanceCriteria ac2 : Valid   [ 
	 scenario "Scenario 2" 
		given "Given"
		 when "When" 
		 then "Then"	
	]
]

UserStory us_1_2 "nameAlias" : UserStory [ 
	partOf us_1
	asA "otherRole"
	iWant "Goal"
	soThat "Reason"
	
	acceptanceCriteria ac1 "Scenario 1" : Valid [  
	  scenario "Scenario 1" 
		given "Given"
		when "When" 
		then "Then"
	]
]


/*
 * https://dzone.com/articles/acceptance-criteria-in-software-explanation-exampl 
 * 
 */
 
 UserStory us_a_1 "Consult the academic fee for the semester" : UserStory [
	asA "a Harvard University student"
	iWant "to see my fee for the semester"
	soThat "I know the remaining balance"
	
	acceptanceCriteria r1 "Rule-1" : Valid  [ rule "The semester fee balance is displayed"]
	acceptanceCriteria r2 "Rule-2" : Valid  [ rule "The semester fee balance is calculated"]
	acceptanceCriteria r3 "Rule-3" : Valid  [ rule "The fee balance is displayed for that semester duration"]
	acceptanceCriteria r4 "Rule-4" : Valid  [ rule "he balance is not displayed if an unknown student identity is applied"]
]

UserStory us_a_2 "Consult the academic fee for the semester"  : UserStory [
	asA "a PayPal account holder"
	iWant "withdraw my pending credit from PayPal"
	soThat "I can have money in my Bank account"
	
	acceptanceCriteria r1 "Rule-1" : Valid  [ rule "I can see on Paypal account that there is pending credit"]
	acceptanceCriteria r2 "Rule-2" : Valid  [ rule "I can choose what amount of credit to withdraw"]
	acceptanceCriteria r3 "Rule-3" : Valid  [ rule "I can see my Bank account balance when I have chosen to withdraw credit"]
]



/*
 * https://rubygarage.org/blog/clear-acceptance-criteria-and-why-its-important
 */ 
 UserStory us_b_2 "Example 2 - Submit feedback" : UserStory [
	asA "Web Site User"
	iWant "to submit feedback"
	soThat "the website owners can consider my opinion or concern during future website updates"
	
	acceptanceCriteria ac1 "scenario 1" : Valid  [ 
	  scenario "User submits feedback with valid data" 
		given "I�m in the role of registered or guest user"
		 when "I open the Feedback page" 
		  and "the system shows the Submit Feedback form containing Email, Name and Comment fields which are required"
		  and "I fill in the Email field with a valid email address"
		  and "I fill in the Name field with my name"
		  and "I fill in the Comment field with my comment"
		  and "I click the Submit Feedback button"		  
		 then "the system submits my feedback"
		  and "the system shows the You�ve successfully submitted your feedback flash message"
		  and "the system clears the fields of the Submit Feedback form"
	]
]
 
 
 UserStory us_b_1 "Example 1 - Search in the Web Site" : UserStory [
	asA "Web Site User"
	iWant "to search on the web site"
	soThat "I can find necessary information"
	
	acceptanceCriteria ac1 "scenario 1" : Valid  [ 
	  scenario "User searches for an item by its name" 
		given "I�m in the role of registered or guest user"
		 when "I open the �Products� page" 
		  and "the system shows me the list of all products"
		  and "the system shows the �Search� form"
		  and "I fill in the �Search� field with the name of existing item in the product list"
		  and "I click the �Apply� button OR press the Enter key"
		  
		 then "the system shows products in the Search Results form with product names matching entered product name"
		  and "the system shows the number of search results in the top of the Search Results form"
	]
]

/*
 * https://dannorth.net/whats-in-a-story/ 

Story: Account Holder withdraws cash
 
As an Account Holder
I want to withdraw cash from an ATM
So that I can get money when the bank is closed
 
Scenario 1: Account has sufficient funds
Given the account balance is $100
 And the card is valid
 And the machine contains enough money
When the Account Holder requests $20
Then the ATM should dispense $20
 And the account balance should be $80
 And the card should be returned
 
Scenario 2: Account has insufficient funds
Given the account balance is $10
 And the card is valid
 And the machine contains enough money
When the Account Holder requests $20
Then the ATM should not dispense any money
 And the ATM should say there are insufficient funds
 And the account balance should be $20
 And the card should be returned
 
Scenario 3: Card has been disabled
Given the card is disabled
When the Account Holder requests $20
Then the ATM should retain the card
And the ATM should say the card has been retained
 */ 



UserStory us_c_1 "Account Holder withdraws cash (from ATM)" : UserStory [
	asA "Account Holder"
	iWant "to withdraw cash from an ATM"
	soThat "I can get money when the bank is closed"
	
	acceptanceCriteria ac1 "scenario 1" : Valid  [ 
	  scenario "Account has sufficient funds" 
		given "the account balance is $100"
 		  and "the card is valid"
 		  and "the machine contains enough money"
 		 when "the Account Holder requests $20"
 		 then "the ATM should dispense $20"
 		  and "the account balance should be $80"
 		  and "the card should be returned" ]

	acceptanceCriteria ac2 "scenario 2" : Valid  [ 
	  scenario "Account has insufficient funds" 
		given "the account balance is $10"
 		  and "the card is valid"
 		  and "the machine contains enough money"
 		 when "the Account Holder requests $20"
 		 then "the ATM should not dispense any money"
 		  and "the ATM should say there are insufficient funds"
 		  and "the account balance should be $20"
 		  and "the card should be returned"	]

	acceptanceCriteria ac3 "scenario 3" : Valid  [ 
	  scenario "Card has been disabled" 
		given "Given the card is disabled"
 		 when "the Account Holder requests $20"
 		 then "the ATM should retain the card"
 		  and "the ATM should say the card has been retained" ]
 ]




/*
 * https://nomad8.com/acceptance_criteria/
 * 
As an internet banking customer
I want to see a rolling balance for my everyday accounts
so that I know the balance of my account after each transaction is applied

Example acceptance criteria:
    The rolling balance is displayed
    The rolling balance is calculated for each transaction
    The balance is displayed for every transaction for the full period of time transactions are available
    The balance is not displayed if a filter has been applied

Another example user story:
As a Snapper cardholder
I want to be able to pick up my pending credit from MySnapper (Note: MySnapper is a client applications for users to top up their ePurse, check their balance etc)
so that I have money on my ePurse

Example acceptance criteria:
    I can see on MySnapper that there are pending credit(s) for my card
    I can choose which credit(s) to pick up
    I can see my new purse balance when I have chosen to pick up a credit
    I can�t top up my card or buy a pass when there are pending credits for my card

(Personally, I like the �I�-format for acceptance criteria to keep focus on the user perspective rather than system centric view.)
 * 
 */

UserStory us_4 "Consult Bank Account" : UserStory [
	asA "Internet banking customer"
	iWant "to see a rolling balance for my everyday accounts"
	soThat "I know the balance of my account after each transaction is applied"
	
	acceptanceCriteria ac1 "Rule-1" : Valid  [rule "The rolling balance is displayed"]
	acceptanceCriteria ac2 "Rule-2"  : Valid  [rule "The rolling balance is calculated for each transaction"]
	acceptanceCriteria ac3 "Rule-3" : Valid   [rule "The balance is displayed for every transaction for the full period of time transactions are available"]
	acceptanceCriteria ac4 "Rule-4"  : Valid  [rule "The balance is not displayed if a filter has been applied"]
]


/*
 * http://www.projectmanagementdocs.com/agile/agile-user-story.html
 * 
As an end user, I want to access the human resource database to generate reports 
so that I can periodically update the company�s staffing contact list.

Acceptance Criteria:
--
Ability to gain access to human resource database
Ability to generate a report which includes
	Employee names
	Dates of birth
	Social security numbers
	Addresses
	Telephone numbers
Ability to use report data to update staffing contact list

Acceptance Testing:
--
Database is accessible internally but not from outside company firewall
MS Access report can be generated from database based on query inputs
MS Access report data can be exported to MS Excel spreadsheet
    Staffing contact list updates contain only most recent data from the database
* 
*/
 UserStory us_6 "Access the human resource database to generate reports" : UserStory [
	asA "end user"
	iWant "to access the human resource database to generate reports"
	soThat "I can periodically update the company�s staffing contact list"
	
	acceptanceCriteria ac1 "Rule-1" : Valid  [rule "Ability to gain access to human resource database"]
	acceptanceCriteria ac2 "Rule-2" : Valid  [rule "Ability to generate a report which includes: Employee names, Dates of birth, 
								  Social security numbers, Addresses, Telephone numbers"]
	acceptanceCriteria ac3 "Rule-3" : Valid  [rule "Ability to use report data to update staffing contact list"]
]
 
/*
 * Good links/articles:

Writing user stories to define the team's work
https://www.ibm.com/cloud/garage/content/think/user-stories/


User Stories, Epics and Themes
https://www.mountaingoatsoftware.com/blog/stories-epics-and-themes
 
10 Tips for Writing Good User Stories
http://www.romanpichler.com/blog/10-tips-writing-good-user-stories/

How to describe user stories using Gherkin language
https://medium.com/@SteelKiwiDev/how-to-describe-user-stories-using-gherkin-language-8cffc6b888df

 * 
 */ 
 
Theme th_1_Jobs "Jobs" : RequirementTheme [us_1, us_1_2 , us_6]
Theme th_2_General "General Aspects" : RequirementTheme [ us_1_2, us_4 , us_6]
	
